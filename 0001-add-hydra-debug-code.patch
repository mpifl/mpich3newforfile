From cbf6f86318d7635ecd471da313858a069df6cc69 Mon Sep 17 00:00:00 2001
From: "Ling.Fang" <androidfl@shu.edu.cn>
Date: Fri, 26 Jun 2015 16:01:07 +0800
Subject: [PATCH] add hydra debug code

---
 src/pm/hydra/tools/bootstrap/external/external_common_launch.c | 7 ++++---
 src/pm/hydra/ui/mpich/mpiexec.c                                | 2 ++
 2 files changed, 6 insertions(+), 3 deletions(-)

diff --git a/src/pm/hydra/tools/bootstrap/external/external_common_launch.c b/src/pm/hydra/tools/bootstrap/external/external_common_launch.c
index 7ad0a54..59d5b5b 100644
--- a/src/pm/hydra/tools/bootstrap/external/external_common_launch.c
+++ b/src/pm/hydra/tools/bootstrap/external/external_common_launch.c
@@ -109,7 +109,7 @@ HYD_status HYDT_bscd_common_launch_procs(char **args, struct HYD_proxy *proxy_li
     HYD_status status = HYD_SUCCESS;
 
     HYDU_FUNC_ENTER();
-
+HYDU_dump_noprefix(stdout, "HYDT_bsci_info.launcher = %s ", HYDT_bsci_info.launcher);
     if (!strcmp(HYDT_bsci_info.launcher, "ssh")) {
         status = ssh_get_path(&path);
         HYDU_ERR_POP(status, "unable to get path to the ssh executable\n");
@@ -276,10 +276,11 @@ HYD_status HYDT_bscd_common_launch_procs(char **args, struct HYD_proxy *proxy_li
             else
                 dummy = NULL;
         }
-
+	HYDT_bsci_info.debug = 1;
+	HYDU_dump_noprefix(stdout, "offset = %d ", offset);
         if (HYDT_bsci_info.debug) {
             HYDU_dump(stdout, "Launch arguments: ");
-            HYDU_print_strlist(targs + offset);
+            HYDU_print_strlist(targs);
         }
 
         if (!strcmp(HYDT_bsci_info.launcher, "manual")) {
diff --git a/src/pm/hydra/ui/mpich/mpiexec.c b/src/pm/hydra/ui/mpich/mpiexec.c
index c07542f..8113368 100644
--- a/src/pm/hydra/ui/mpich/mpiexec.c
+++ b/src/pm/hydra/ui/mpich/mpiexec.c
@@ -214,6 +214,8 @@ int main(int argc, char **argv)
         HYD_uii_mpx_exec_list->appnum = 0;
     }
 
+    HYD_server_info.user_global.debug = 1;
+
     if (HYD_server_info.user_global.debug)
         for (node = HYD_server_info.node_list; node; node = node->next)
             HYDU_dump_noprefix(stdout, "host: %s\n", node->hostname);
-- 
1.9.1

